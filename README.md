# ğŸ¥ CAMEL-AI åŒ»ç–—æ™ºèƒ½ä½“ RAG å®æˆ˜è¯¾ç¨‹

> ğŸ’¡ **æ¼”ç¤ºæ–‡ç¨¿**: å¯ä»¥ä»è¿™ä¸ªç½‘å€æŸ¥çœ‹æ¼”ç¤ºæ–‡ç¨¿å†…å®¹ https://medical-rag-course.lovable.app

æœ¬é¡¹ç›®æ—¨åœ¨é€šè¿‡ä¸€ä¸ªåŒ»ç–—åœºæ™¯çš„æ¼”ç¤ºï¼Œå¸®åŠ©åˆå­¦è€…ç†è§£ **æ™ºèƒ½ä½“ (Agents)** ä¸ **æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG)** çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¹¶åŠ¨æ‰‹å®ç°ä¸¤ç§ä¸åŒå½¢æ€çš„ RAG ç³»ç»Ÿã€‚

## ğŸ“– ç›®å½•

- [ç¬¬ä¸€éƒ¨åˆ†ï¼šè¯¾ç¨‹æ ¸å¿ƒæ¦‚å¿µ](#-ç¬¬ä¸€éƒ¨åˆ†è¯¾ç¨‹æ ¸å¿ƒæ¦‚å¿µ)
  - [1. ä»€ä¹ˆæ˜¯å¤§æ¨¡å‹æ™ºèƒ½ä½“ (LLM Agent)?](#1-ä»€ä¹ˆæ˜¯å¤§æ¨¡å‹æ™ºèƒ½ä½“--llm-agent)
  - [2. ä»€ä¹ˆæ˜¯ RAG (Retrieval-Augmented Generation)?](#2-ä»€ä¹ˆæ˜¯-rag-retrieval-augmented-generation)
  - [3. æœ¬é¡¹ç›®å±•ç¤ºçš„ä¸¤ç§ RAG æ¨¡å¼](#3-æœ¬é¡¹ç›®å±•ç¤ºçš„ä¸¤ç§-rag-æ¨¡å¼)
- [ç¬¬äºŒéƒ¨åˆ†ï¼šé¡¹ç›®åŠŸèƒ½æ¼”ç¤º](#ï¸-ç¬¬äºŒéƒ¨åˆ†é¡¹ç›®åŠŸèƒ½æ¼”ç¤º)
  - [1. ä¸“å®¶é—®ç­”æ¨¡å¼ (Expert QA)](#1-ä¸“å®¶é—®ç­”æ¨¡å¼-expert-qa)
  - [2. è¯Šç–—æ¨¡æ‹Ÿæ¨¡å¼ (Consultation Simulation)](#2-è¯Šç–—æ¨¡æ‹Ÿæ¨¡å¼-consultation-simulation)
- [ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»»åŠ¡](#-ç¬¬ä¸‰éƒ¨åˆ†ä»»åŠ¡)
  - [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
  - [ä½ çš„ä»»åŠ¡ (Your Tasks)](#-ä½ çš„ä»»åŠ¡-your-tasks)
  - [æµ‹è¯•ä½ çš„ä»£ç ](#-æµ‹è¯•ä½ çš„ä»£ç )
- [ç¬¬å››éƒ¨åˆ†ï¼šå¿«é€Ÿå¼€å§‹ (Quick Start)](#-ç¬¬å››éƒ¨åˆ†å¿«é€Ÿå¼€å§‹-quick-start)
  - [1. ç¯å¢ƒé…ç½®](#1-ç¯å¢ƒé…ç½®)
  - [2. è¿è¡Œé¡¹ç›®](#2-è¿è¡Œé¡¹ç›®)
  - [3. ç³»ç»Ÿé…ç½®](#3-ç³»ç»Ÿé…ç½®)
- [é¡¹ç›®ä¿¡æ¯](#é¡¹ç›®ä¿¡æ¯)

---

## ğŸ“š ç¬¬ä¸€éƒ¨åˆ†ï¼šè¯¾ç¨‹æ ¸å¿ƒæ¦‚å¿µ

### 1. ä»€ä¹ˆæ˜¯å¤§æ¨¡å‹æ™ºèƒ½ä½“ ( LLM Agent)?

ç®€å•æ¥è¯´ï¼Œæ™ºèƒ½ä½“æ˜¯æ‹¥æœ‰â€œå¤§è„‘â€ï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰çš„ç¨‹åºï¼Œå®ƒä¸ä»…èƒ½é™ªä½ èŠå¤©ï¼Œè¿˜èƒ½ä½¿ç”¨â€œå·¥å…·â€ï¼ˆå¦‚æœç´¢å¼•æ“ã€æ•°æ®åº“ã€è®¡ç®—å™¨ï¼‰æ¥è§£å†³å¤æ‚é—®é¢˜ã€‚

### 2. ä»€ä¹ˆæ˜¯ RAG (Retrieval-Augmented Generation)?

å¤§è¯­è¨€æ¨¡å‹è™½ç„¶åšå­¦ï¼Œä½†å®ƒæ— æ³•çŸ¥é“**ç§æœ‰æ•°æ®**ï¼ˆå¦‚ä½ åŒ»é™¢çš„ç—…å†ï¼‰æˆ–**æœ€æ–°å‘ç”Ÿçš„æ–°é—»**ã€‚
RAG æŠ€æœ¯å°±åƒæ˜¯ç»™äº† AI ä¸€æœ¬â€œå‚è€ƒä¹¦â€ã€‚å½“ AI å›ç­”é—®é¢˜æ—¶ï¼Œå®ƒä¸å†åªé â€œæ­»è®°ç¡¬èƒŒâ€çš„è®­ç»ƒæ•°æ®ï¼Œè€Œæ˜¯å…ˆå»ç¿»é˜…æˆ‘ä»¬æä¾›çš„â€œå‚è€ƒä¹¦â€ï¼ˆçŸ¥è¯†åº“ï¼‰ï¼Œæ‰¾åˆ°ç›¸å…³å†…å®¹åå†å›ç­”ã€‚

### 3. æœ¬é¡¹ç›®å±•ç¤ºçš„ä¸¤ç§ RAG æ¨¡å¼

æœ¬é¡¹ç›®è®¾è®¡äº†ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼Œåˆ†åˆ«å¯¹åº” RAG çš„ä¸¤ç§ä¸åŒåº”ç”¨èŒƒå¼ï¼š

#### æ¨¡å¼ Aï¼š"ä¸“å®¶é—®ç­”" -- æ ‡å‡† RAG

* **åœºæ™¯**: ä½ é—®åŒ»ç”Ÿä¸€ä¸ªä¸“ä¸šé—®é¢˜ï¼Œç³»ç»Ÿè‡ªåŠ¨å…ˆå»æ£€ç´¢ç›¸å…³æ–‡æ¡£ï¼ŒæŠŠèµ„æ–™å–‚ç»™åŒ»ç”Ÿï¼ŒåŒ»ç”ŸåŸºäºèµ„æ–™å›ç­”ã€‚
* **é€»è¾‘**: ç”¨æˆ·æé—® -> **ç³»ç»Ÿå¼ºåˆ¶æ£€ç´¢** -> æ³¨å…¥ä¸Šä¸‹æ–‡ -> AI å›ç­”ã€‚
* **ç‰¹ç‚¹**: æ¯ä¸€å¥è¯éƒ½ä¼šè§¦å‘æ£€ç´¢ï¼Œé€‚åˆçŸ¥è¯†é—®ç­”ã€‚

![æ ‡å‡†RAGæµç¨‹](images/standard_rag.jpg)

#### æ¨¡å¼ Bï¼š"è¯Šç–—æ¨¡æ‹Ÿ" -- Agentic RAG

* **åœºæ™¯**: åŒ»ç”Ÿåœ¨ç»™ç—…äººçœ‹ç—…ã€‚åŒ»ç”Ÿè§‰å¾—éœ€è¦çœ‹æ£€æŸ¥æŠ¥å‘Šæ—¶ï¼Œæ‰ä¼šä¸»åŠ¨å»â€œæŸ¥é˜…â€ç³»ç»Ÿã€‚å¦‚æœä¸éœ€è¦ï¼ˆæ¯”å¦‚åªæ˜¯é—®å€™ï¼‰ï¼Œå°±ä¸æŸ¥ã€‚
* **é€»è¾‘**: åŒ»ç”Ÿæ€è€ƒ -> **åˆ¤æ–­æ˜¯å¦éœ€è¦æŸ¥èµ„æ–™** -> (è‹¥éœ€è¦) è°ƒç”¨æ£€ç´¢å·¥å…· -> è·å¾—ä¿¡æ¯ -> è¯Šæ–­ã€‚
* **ç‰¹ç‚¹**: æ›´åŠ çµæ´»ï¼ŒRAG è¢«å°è£…æˆä¸€ä¸ª**å·¥å…· (Tool)** ä¾›æ™ºèƒ½ä½“è‡ªä¸»è°ƒç”¨ã€‚

![Agentic RAGæµç¨‹](images/agentic_rag.png)

---

## ğŸ› ï¸ ç¬¬äºŒéƒ¨åˆ†ï¼šé¡¹ç›®åŠŸèƒ½æ¼”ç¤º

### 1. ä¸“å®¶é—®ç­”æ¨¡å¼ (Expert QA)

è¿™æ˜¯ä¸€ä¸ªåŸºäºçŸ¥è¯†åº“çš„é—®ç­”ç³»ç»Ÿã€‚

* **åŠŸèƒ½**: ä½ å¯ä»¥ä¸Šä¼ åŒ»å­¦æŒ‡å—ã€è¯å“è¯´æ˜ä¹¦ï¼ˆPDF/TXTï¼‰ï¼Œç„¶åå‘â€œä¸“å®¶åŒ»ç”Ÿâ€æé—®ã€‚
* **äº®ç‚¹**: æ”¯æŒé…ç½® RAG çš„å‚æ•°ï¼ˆæ£€ç´¢å¤šå°‘æ¡ã€ç›¸ä¼¼åº¦é˜ˆå€¼ï¼‰ï¼Œè®©ä½ ç›´è§‚æ„Ÿå—å‚æ•°å˜åŒ–å¯¹å›ç­”è´¨é‡çš„å½±å“ã€‚

![ä¸“å®¶é—®ç­”æ¨¡å¼ç•Œé¢](images/screenshot-expert_qa.png)

### 2. è¯Šç–—æ¨¡æ‹Ÿæ¨¡å¼ (Consultation Simulation)

è¿™æ˜¯ä¸€ä¸ªå¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿã€‚

* **è§’è‰²**:
  * **ğŸ‘¨â€âš•ï¸ åŒ»ç”Ÿæ™ºèƒ½ä½“**: è´Ÿè´£é—®è¯Šå’Œè¯Šæ–­ï¼Œæ‹¥æœ‰â€œæŸ¥é˜…ç—…å†â€çš„å·¥å…·æƒé™ã€‚
  * **ğŸ¤’ æ‚£è€…æ™ºèƒ½ä½“**: æ‰®æ¼”ç‰¹å®šç—…ç—‡çš„ç—…äººï¼Œæ ¹æ®å‰§æœ¬å›ç­”é—®é¢˜ã€‚
* **ç©æ³•**:
  * **å…¨è‡ªåŠ¨æ¨¡æ‹Ÿ**: å›´è§‚ä¸¤ä¸ª AI äº’é£™æ¼”æŠ€ï¼Œçœ‹åŒ»ç”Ÿå¦‚ä½•é€šè¿‡å·¥å…·æŸ¥å‡ºç—…å› ã€‚
  * **è§’è‰²æ‰®æ¼”**: ä½ å¯ä»¥æ‰®æ¼”åŒ»ç”Ÿå»é—®è¯Šï¼Œæˆ–è€…æ‰®æ¼”ç—…äººå»åˆéš¾åŒ»ç”Ÿã€‚

![è¯Šç–—æ¨¡æ‹Ÿæ¨¡å¼ç•Œé¢](images/screenshot-simulation.png)

---

## ğŸ’» ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»»åŠ¡

### ğŸ“‚ é¡¹ç›®ç»“æ„

```text
medical_rag_course/
â”œâ”€â”€ app.py                  # é¡¹ç›®å…¥å£ (Streamlit ä¸»ç¨‹åº)
â”œâ”€â”€ requirements.txt        # ä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ agents.py       # æ™ºèƒ½ä½“é€»è¾‘ (Agent Manager)
â”‚   â”‚   â”œâ”€â”€ rag.py          # [æ ¸å¿ƒä»»åŠ¡] RAG ç³»ç»Ÿæ ¸å¿ƒå®ç° (Qdrant)
â”‚   â”‚   â”œâ”€â”€ tools.py        # [æ ¸å¿ƒä»»åŠ¡] åŒ»ç”Ÿä½¿ç”¨çš„æœç´¢å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ models.py       # æ¨¡å‹å·¥å‚ç±»
â”‚   â””â”€â”€ ui/                 # ç•Œé¢ç›¸å…³ä»£ç 
â”‚       â”œâ”€â”€ layout.py
â”‚       â””â”€â”€ tabs/           # ä¸¤ä¸ªä¸»è¦æ ‡ç­¾é¡µçš„ UI å®ç°
|-- ä¸´åºŠç—…ç†å­¦.txt           # æ¥è‡ªäºMedQAæ•°æ®é›†çš„è¯­æ–™ (https://github.com/jind11/MedQA)
```

### ğŸ¯ ä½ çš„ä»»åŠ¡ (Your Tasks)

ä½ éœ€è¦è¡¥å…¨ `src/core/` ç›®å½•ä¸‹çš„å…³é”®ä»£ç ï¼š

1. **ä½œä¸š 1 (src/core/rag.py)**: å®ç° `build_retriever_from_files`
   * ç›®æ ‡ï¼šåˆå§‹åŒ–å‘é‡æ•°æ®åº“ï¼Œå¹¶å°†ä¸Šä¼ çš„æ–‡ä»¶åˆ‡ç‰‡ã€å‘é‡åŒ–å­˜å‚¨ã€‚
2. **ä½œä¸š 2 (src/core/rag.py)**: å®ç° `get_retrieval_results`
   * ç›®æ ‡ï¼šç¼–å†™æŸ¥è¯¢é€»è¾‘ï¼Œä»å‘é‡åº“ä¸­æ£€ç´¢æœ€ç›¸ä¼¼çš„æ–‡æ¡£ç‰‡æ®µã€‚
3. **ä½œä¸š 3 (src/core/tools.py)**: å®ç° `search_medical_records`
   * ç›®æ ‡ï¼šå°† RAG æ£€ç´¢åŠŸèƒ½å°è£…æˆä¸€ä¸ª Function Toolï¼Œä¾›åŒ»ç”Ÿæ™ºèƒ½ä½“åœ¨è¯Šç–—æ¨¡å¼ä¸­è°ƒç”¨ã€‚

### ğŸ§ª æµ‹è¯•ä½ çš„ä»£ç 

å®Œæˆæ¯ä¸ªä»»åŠ¡åï¼Œä½ å¯ä»¥è¿è¡Œå¯¹åº”çš„æµ‹è¯•æ¥éªŒè¯å®ç°æ˜¯å¦æ­£ç¡®ï¼š

```bash
# æµ‹è¯•ä»»åŠ¡ 1: RAG æ„å»º
python tests/test_task1_rag_build.py

# æµ‹è¯•ä»»åŠ¡ 2: RAG æ£€ç´¢
python tests/test_task2_rag_retrieve.py

# æµ‹è¯•ä»»åŠ¡ 3: å·¥å…·å‡½æ•°
python tests/test_task3_tool.py

# æˆ–è€…è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m unittest discover tests
```

æ¯ä¸ªæµ‹è¯•æ–‡ä»¶éƒ½ä¼šéªŒè¯å¯¹åº”ä»»åŠ¡çš„å®ç°æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚å¦‚æœæµ‹è¯•é€šè¿‡ï¼Œä¼šæ˜¾ç¤º âœ… æç¤ºã€‚

> ğŸ’¡ **æç¤º**:
> - å®Œæˆä»»åŠ¡åï¼Œè¯·é‡æ–°è¿è¡Œ `streamlit` æ¥åˆ·æ–°ä»¥åŠ è½½æœ€æ–°çš„ä»£ç å®ç°ã€‚
> - æ¯æ¬¡é‡æ–°è¿è¡Œæˆ–åˆ·æ–°é¡µé¢ï¼Œéƒ½è®°å¾—åœ¨ä¾§è¾¹æ é‡æ–°å¡«å†™ **API Key**ã€‚

---

## ğŸš€ ç¬¬å››éƒ¨åˆ†ï¼šå¿«é€Ÿå¼€å§‹ (Quick Start)

### 1. ç¯å¢ƒé…ç½®

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository_url>
cd medical_rag_course

# 2. å®‰è£… uv
pip install uv

# 3. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
uv venv --python 3.11
.venv\Scripts\activate   # Windows
# source .venv/bin/activate  # Mac/Linux

# 4. å®‰è£…ä¾èµ–
uv pip install -r requirements.txt
```

### 2. è¿è¡Œé¡¹ç›®

```bash
python -m streamlit run app.py
```

### 3. ç³»ç»Ÿé…ç½®

å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨å·¦ä¾§è¾¹æ å¡«å†™é…ç½®ï¼š

1. **Base URL**: ä½ çš„æ¨¡å‹æœåŠ¡åœ°å€ (ä½ å¯ä»¥åŒæ ·å‰å¾€é˜¿é‡Œç™¾ç‚¼å¹³å°è·å–)ã€‚
2. **API Key**: ä½ çš„ API å¯†é’¥ã€‚
3. **Model Name**: æ¨¡å‹åç§° (å¦‚ `qwen-flash`ï¼‰ ã€‚

---

## é¡¹ç›®ä¿¡æ¯

**è®¾è®¡**: å¤æ—¦å¤§å­¦ DISC å®éªŒå®¤
**è¯¾ç¨‹**: äººå·¥æ™ºèƒ½è¯¾ç¨‹ï¼Œ2025 å¹´ç§‹å­£å­¦æœŸ
